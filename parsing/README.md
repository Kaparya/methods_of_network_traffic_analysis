# Домшнее задание 04 Парсинг и анализ (Data Parsing Pipeline)

Этот подпроект содержит инструменты для очистки и предобработки данных из датасета вакансий/резюме. Основная цель — превратить "грязные" текстовые данные в численные и категориальные признаки для последующего машинного обучения.

## Архитектура
Обработка реализована на паттерне **Chain of Responsibility** (Цепочка ответственности). Каждый этап обработки вынесен в отдельный класс-хэндлер, что позволяет легко добавлять, удалять или менять порядок этапов.

### Основные компоненты:
- **PipelineContext**: Объект, передающий состояние (DataFrame) между хэндлерами.
- **Handler (ABC)**: Абстрактный базовый класс для всех обработчиков.
- **build_pipeline()**: Функция сборки цепочки обработки.

## Реализованные хэндлеры

1. **LoadCSVHandler**: Загрузка данных, настройка кодировок и индексов.
2. **ParseGenderAgeBirthdayHandler**: 
   - Выделение пола (бинарный признак).
   - Парсинг возраста.
   - Извлечение месяца рождения (вся эта информация в одном столбце).
3. **ParseSalaryHandler**: 
   - Извлечение числового значения зарплаты.
   - Конвертация различных валют (USD, EUR, KZT, грн. и др.) в рубли по фиксированному курсу.
4. **ParseJobHandler**: 
   - Группировка редких профессий в категорию `other` на основе пороговых значений частоты.
5. **ParseCityHandler**: 
   - Группировка 1100+ городов в крупные регионы (Moscow, SPb, Federal Districts, CIS) для уменьшения размерности.
6. **ParseEmploymentHandler**: 
   - Создание бинарных признаков для типов занятости (full-time, part-time, internship и др.).
7. **ParseWorkScheduleHandler**: 
   - Создание бинарных признаков для графиков работы (remote, flexible, shift и др.).
8. **ParseExperienceHandler**: 
   - Конвертация текстового описания опыта (года, месяцы) в общее количество месяцев.
9. **ParseLastPlaceHandler**:
   - Удаление колонки с последним местом работы - возможно не несет достаточной пользы (может быть исправим позже).
10. **ParseLastJobHandler**:
    - Обработка последней должности, группировка редких значений.
11. **ParseEducationHandler**: 
   - Категоризация уровней образования (higher, incomplete higher, secondary) через бинарные флаги.
12. **ParseResumeHandler**:
    - Классификация резюме на "старые" (более 1 года) и "новые".
13. **ParseAutoHandler**:
    - Извлечение информации о наличии автомобиля.
14. **EncodeCategoricalFeaturesHandler**:
    - Кодирование категориальных признаков методом One-Hot Encoding (`get_dummies`).
15. **SplitDataHandler**:
    - Разделение данных на матрицу признаков `X` и целевую переменную `y`.
16. **SaveDataHandler**:
    - Сохранение обработанных данных в форматы `X.npy` и `y.npy`.

## Файловая структура
- `pipeline.ipynb`: Основной ноутбук с реализацией пайплайна.
- `hh.csv`: Исходный датасет (600MB+, исключен из git).
- `tmp_files/`: Вспомогательные файлы со списками уникальных значений и частотным анализом для настройки хэндлеров.
- `X.npy`: результат работы пайплайна (признаки)
- `Y.npy`: результат работы пайплайна (таргет)

## Использование
```python
# Пример запуска пайплайна
pipeline = build_pipeline()
ctx = PipelineContext(csv_path=Path("hh.csv"))
ctx = pipeline.handle(ctx)
```
